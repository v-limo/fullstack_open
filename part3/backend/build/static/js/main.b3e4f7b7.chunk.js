(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),o=t(19),s=t.n(o),l=t(4),i=t(7),u=t(3),d=function(e){var n=e.handleChangeSearch,t=e.search;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Filter Contact"}),Object(c.jsx)("label",{className:"col-sm-2  col-form-label",htmlFor:"search",children:"Filter shown with:"}),Object(c.jsx)("input",{className:"form-control col-6",name:"search",value:t,onChange:n})]})},b=(t(10),function(e){var n=e.handleName,t=e.newName,a=e.newNumber,r=e.handleNumber,o=e.handleSubmit,s=e.message,l=e.success;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Add New Contact"}),Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Name :"}),Object(c.jsx)("input",{className:"form-control col-6",name:"name",value:t,onChange:n})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"number",className:"col-sm-2 col-form-label",children:"Number :"}),Object(c.jsx)("input",{className:"form-control col-6",name:"number",value:a,onChange:r})]}),Object(c.jsx)("div",{className:" h6 continer-fluid my-2 col-6 text-danger font-weight-bold",children:s}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn px-5 m-3 btn-success rounded ",type:"submit",onClick:o,children:"Add Contact"})}),Object(c.jsx)("div",{className:" h6  continer-fluid  my-2  col-6 text-success font-weight-bold ",children:l})]})]})}),j=function(e){var n=e.persons,t=e.handleDelete;return Object(c.jsx)("div",{className:"border",children:Object(c.jsx)("ol",{children:n.map((function(e){var n=e.name,a=e.number,r=e.id;return Object(c.jsxs)("li",{className:" d-flex  m-auto justify-content-between align-items-center",children:[Object(c.jsx)("div",{children:Object(c.jsx)("p",{children:n})}),Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[a," "]})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn btn-danger rounded ",type:"submit",onClick:function(){return t(r)},children:"delete"})})]},r)}))})})},h=t(6),m=t.n(h),f="/api/persons",O=function(){var e=Object(a.useState)(""),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),s=Object(u.a)(o,2),h=s[0],O=s[1],x=Object(a.useState)(""),v=Object(u.a)(x,2),p=v[0],N=v[1],g=Object(a.useState)(""),w=Object(u.a)(g,2),y=w[0],S=w[1],C=Object(a.useState)(""),k=Object(u.a)(C,2),D=k[0],F=k[1],A=Object(a.useState)([]),E=Object(u.a)(A,2),J=E[0],B=E[1];Object(a.useEffect)((function(){m.a.get(f).then((function(e){return e.data})).then((function(e){return B(e)}))}),[]);return Object(c.jsx)("div",{className:"container-fluid w-100 h-100 m-0 p-0 bg-white",children:Object(c.jsxs)("div",{className:" w-50 m-5 mx-auto container  rounded border",style:{display:"flex",flexDirection:"column",backgroundColor:"#eeeeee"},children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsxs)("ol",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(d,Object(l.a)({},{handleChangeSearch:function(e){N(e.target.value);var n=Object(i.a)(J).filter((function(e){return e.name.includes(p)}));console.log(n.length),B(n)},search:p}))}),Object(c.jsx)("li",{children:Object(c.jsx)(b,Object(l.a)({},{newName:t,newNumber:h,handleNumber:function(e){O(e.target.value)},handleName:function(e){r(e.target.value)},handleSubmit:function(e){e.preventDefault();var n,c,a={name:t,number:h},o=Object(i.a)(J),s=o.find((function(e){var n=e.name;return t===n})),u=o.find((function(e){var n=e.number;return h===n}));if(t&&h)if(u)S("".concat(h,"  is already in the phonebook "));else if(s){if(window.confirm("".concat(t," is already added to phonebook, do you want to replcae the number? "))){var d=o.find((function(e){return t===e.name})),b=d.id,j=o.filter((function(e){var n=e.id;return b!==n})),x=Object(l.a)(Object(l.a)({},d),{},{number:h});(n=b,c=x,m.a.put("".concat(f,"/").concat(n),c).then((function(e){return e.data}))).then((function(e){B([].concat(Object(i.a)(j),[e])),r(""),O(""),S(""),F("Successfully updated contact")})).catch((function(e){return S(e.response.data.error.toString())}))}}else try{(function(e){return m.a.post(f,e).then((function(e){return e.data}))})(a).then((function(e){B([].concat(Object(i.a)(o),[e])),r(""),O(""),S(""),F("Successfully added ".concat(a.name,"."))})).catch((function(e){return S(e.response.data.error.toString())}))}catch(v){console.log(v)}else t?h||S("Number cannot be empty "):S("Name cannot be empty")},message:y,success:D}))}),Object(c.jsxs)("li",{children:[Object(c.jsxs)("h2",{children:["Numbers: ",J.length]}),Object(c.jsx)(j,Object(l.a)({},{persons:J,handleDelete:function(e){var n=J.find((function(n){return e===n.id})).name;if(window.confirm("Do you really want to delete ".concat(n,"? "))){var t=J.find((function(n){return n.id===e}));(function(e,n){return m.a.delete("".concat(f,"/").concat(e),n).then((function(e){return e.data}))})(e,t).then((function(n){B(J.filter((function(n){return n.id!==e}))),S(""),F("Successfully deleted ".concat(t.name))}))}}}))]})]})]})})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.b3e4f7b7.chunk.js.map